<zan-dialog id="zan-button-dialog" bindgetuserinfo="getuserinfo"></zan-dialog>
<zan-dialog id="zan-vertical-dialog"></zan-dialog>
<zan-dialog id="zan-base-dialog"></zan-dialog>
<zan-dialog id="zan-base-dialog2"></zan-dialog>
<zan-toptips id="zan-toptips" content="{{ content }}" is-show="{{ $zanui.toptips.show }}" />

<!-- 登录框 -->
<login-modal isShow="{{isHasAccount}}">
  <form class='display-flex-center-center padding-h-20' bindsubmit="onFormSubmit">
    <view class='login-input margin-t-10'>
      <input type='number' placeholder='请输入手机号' name="mobile" cursor-spacing="20"></input>
    </view>
    <view class='login-input margin-t-20'>
      <input password placeholder='请输密码' name="password" cursor-spacing="20"></input>
    </view>
    <button class='ok-btn bg-theme' form-type="submit">登录</button>
  </form>
</login-modal>
<!-- 项目楼栋选择
<picker mode="multiSelector" bindchange="bindMultiPickerChange" bindcolumnchange="bindMultiPickerColumnChange" value="{{multiIndex}}" range="{{multiArray}}">
</picker> -->
<view class='position-f bg-theme font-white display-flex-center-between' style='width:100%;line-height:80rpx' wx:if="{{projectList.length > 0}}">
  <text class='iconfont icon-list menu-icon' bindtap='toggleLeftPopup'></text>
  <view>{{currentBuilding.buildingName}} {{pangzhanType[currentPzIndex]}}</view>
  <text class='iconfont icon-news menu-icon' bindtap='toMsg'><text style='font-size:26rpx;'>{{unreadNum ? unreadNum : ""}}</text></text>
</view>
<view style="height:92rpx;"></view>

<!-- 左侧弹出框 -->
<zan-popup show="{{ showLeftPopup }}" type="left" bindclose="toggleLeftPopup">
  <view class="pop-container-left">
  <scroll-view class="" scroll-y style="height:100%">
    <view class='building-area'>
      <view class='s-title'>楼栋</view>
      <view class='s-list display-flex-center-center-column'>
        <view class='pztype {{item.id==currentBuilding.id ? "pztype-active" : ""}}' wx:for="{{buildingList}}" wx:key="{{index}}" data-value="{{index}}" bindtap="changeBuilding">{{item.buildingName}}</view>
      </view>
    </view>
    <view class='pangzhantype-area'>
      <view class='s-title'>旁站类型</view>
      <view class='s-list display-flex-center-center-column'>
        <view class='pztype {{currentPzIndex == 0 ? "pztype-active" : ""}}' data-value="0" bindtap="changePangzhan">机械灌注桩</view>
        <view class='pztype {{currentPzIndex == 1 ? "pztype-active" : ""}}' data-value="1" bindtap="changePangzhan">水泥搅拌桩</view>
        <view class='pztype {{currentPzIndex == 2 ? "pztype-active" : ""}}' data-value="2" bindtap="changePangzhan">预应力管桩</view>
      </view>
    </view>
    <view class='project-area'>
      <view class='s-title'>项目</view>
      <view class='s-list display-flex-center-center-column'>
       <view class='pztype {{item.id==currentProject.id ? "pztype-active" : ""}}' wx:for="{{projectList}}" wx:key="{{index}}" data-value="{{index}}" bindtap="changeProject">{{item.projectName}}</view>
      </view>
    </view>
    <view class='padding-h-10 font-12' wx:if="{{!projectList.length}}">当前用户未参与任何项目</view>
    </scroll-view>
  </view>
</zan-popup>

<!-- <view class="padding-h-10 font-12"wx:if="{{!isShowLoading}}">注：绿色代表已开始、橙色代表待审核、蓝色代表已完成</view> -->

<view class="bg-white" style='height:100%' wx:if="{{rangeColumnList.length}}">
  <!--------------------------------------------- 范围 ------------------------------------------------->
  <view class="scroll_box">
    <scroll-view class='cate-scroll' scroll-x="true" style="width: 100%">
      <view class='flex-row'>
        <view wx:for='{{ rangeColumnList }}' wx:key="{{item.id}}" data-index="{{index}}" class="rangeItem {{ curRange == index ? 'swiper-title--active' : '' }}" bindtap="switchTopTab">{{ index > 0 ? rangeColumnList[index-1]+1 : 1 }} - {{ rangeColumnList[index] }}
        </view>
      </view>
    </scroll-view>
  </view>

  <swiper bindchange="watchChange" current="{{curRange}}">
      <swiper-item  wx:for='{{ rangeColumnList }}' wx:key="{{item.id}}">
        <scroll-view scroll-y style="height: 100%" bindscrolltolower="scrolltolower">
        <!-- 加载动画 -->
        <view class="zan-panel loading-example no-flex" wx:if="{{isShowLoading || !pangzhanList.length}}" style='margin-top:30px'>
          <zan-loading type="dot" color="black"></zan-loading>
        </view>
          <view class='between'>
            <block wx:for="{{pangzhanList[index]}}" wx:key="{{index}}">
              <view bindtap='toDetail' data-index="{{index}}" class='position-r'>
                <button class='building-btn undo' wx:if='{{ item.status == 0 }}'>
                  {{ item.pileCode }}
                </button>
                <button class='building-btn doing font-white' wx:if='{{ item.status == 1 }}'>
                  {{ item.pileCode }}
                </button>
                <button class='building-btn finished font-white' wx:if='{{ item.status == 2 }}'>
                  {{ item.pileCode }}
                </button>
                <button class='building-btn checked font-white' wx:if='{{ item.status == 3 || item.status == 4 || item.status == 5 }}'>
                  {{ item.pileCode }}
                </button>
                <view class='status'  wx:if='{{ item.status == 3 || item.status == 2  || item.status == 1}}'></view>
              </view>
            </block>
          </view>

        </scroll-view>
      </swiper-item>
  </swiper>
</view>

<view class='text-c padding-10 font-13 margin-t-30' wx:if="{{noProjects}}">当前用户未参与任何项目</view>
<view class='text-c padding-10 font-13 margin-t-30' wx:if="{{nobuildings}}">当前项目未设置楼栋信息</view>
<view class='text-c padding-10 font-13 margin-t-30' wx:if="{{noPiles}}">当前项目的总桩数为零</view>
<!-- 添加按钮 -->
<!-- <view class='add-buttom' bindtap='showAddMenu'><text class='iconfont icon-add font-theme'></text></view> -->